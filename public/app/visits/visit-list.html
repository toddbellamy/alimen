<div class="container"><ul class="nav nav-pills pull-left"><li class="col-sm-11"><a href="/families/{{family._id}}" class="btn btn-md">Visits</a></li></ul><ul class="nav nav-pills pull-right"><li class="col-sm-6"><input ng-model="searchText" ng-model-options="{ debounce: 250 }" placeholder="Filter by Name" class="form-control"/></li><li class="col-sm-6"><select ng-model="sortOrder" ng-options="item.value as item.text for item in sortOptions" class="form-control"></select></li></ul></div><div class="container container-topmargin"><form name="familyVisitsForm" class="form-horizontal"><div class="well well-sm"><fieldset><div class="form-group"><label class="col-sm-1 control-label"></label><div class="col-sm-5"><p class="form-control-static">{{family.primaryClient.lastName + ', ' + family.primaryClient.firstName}}</p></div><div class="col-sm-6"><p class="form-control-static">{{family.phone1 | tel}}</p></div></div><div class="form-group"><label class="col-sm-1 control-label"></label><div class="col-sm-5"><p class="form-control-static">{{family.address1 + ', ' + family.city + ', ' + family.province}}</p></div><div class="col-sm-6"><p class="form-control-static">{{family.postal}}</p></div></div></fieldset></div><div class="form-group"><span></span></div><div class="form-group"><div class="col-sm-12"><button ng-click="addVisit()" class="btn btn-sm">Add Visit</button></div></div><div class="form-group"><div class="col-sm-12"></div><table class="table table-condensed"><thead><tr><th class="col-sm-2">Client</th><th class="col-sm-2">Date</th><th>Value</th><th>Store Voucher</th><th>Reusable Bag Given</th><th>Comments</th><th>Verification</th><th>Food Voucher</th><th>Approved By</th><th></th></tr></thead><tbody><tr ng-repeat="visit in family.visits | orderBy:sortOrder:reverseOrder() | pageSlice:pageSize:currentPage | filter:searchText"><td class="col-sm-2"><select name="visitClient" ng-model="visit.client" ng-options="client.lastName + ', ' + client.firstName  for client in family.clients track by client._id" ng-disabled="visit._id != 0" required="required" class="form-control"></select></td><td class="col-sm-2"><input ng-value="visit.date | date" readonly="readonly" class="form-control"/></td><td><input name="visitValue{{visit._id}}" ng-model="visit.value" ng-disabled="visit._id != 0" smart-float="smart-float" invalid-leave="invalid-leave" class="form-control"/><span ng-show="familyVisitsForm.visitValue{{visit._id}}.$touched &amp;&amp; familyVisitsForm.visitValue{{visit._id}}.$error.float" class="error">Please enter valid monetary value.</span></td><td><input name="visitStoreVoucher" ng-model="visit.storeVoucher" ng-disabled="visit._id != 0" class="form-control"/></td><td style="text-align: center;"><input name="visitReusableBagGiven" type="checkbox" ng-model="visit.reusableBagGiven" class="input-sm"/></td><td><input name="visitComments" ng-model="visit.comments" class="form-control"/></td><td><input name="visitVerification{{visit._id}}" ng-model="visit.verification" invalid-leave="invalid-leave" required="required" class="form-control"/><span ng-show="familyVisitsForm.visitVerification{{visit._id}}.$touched &amp;&amp; familyVisitsForm.visitVerification{{visit._id}}.$error.required" class="error">Please provide Verification.</span></td><td><input name="visitFoodVoucher" ng-model="visit.foodVoucher" ng-disabled="visit._id != 0" class="form-control"/></td><td><input name="visitApprovedBy" ng-model="visit.approvedBy" ng-disabled="visit._id != 0" class="form-control"/></td><td><button ng-click="removeVisit(visit)" ng-show="visit._id == 0" class="btn btn-xs"><span class="glyphicon glyphicon-remove"></span></button></td></tr></tbody></table><nav class="nav-sm"><ul class="pagination pagination-sm"><li><a href="#" aria-label="Previous" ng-click="firstPage()"><span class="glyphicon glyphicon-step-backward"></span></a></li><li ng-repeat="pageIndex in visitPages()"><a href="#" ng-click="setPage(pageIndex)"><span>{{pageIndex}}</span></a></li><li><a href="#" aria-label="Previous" ng-click="lastPage()"><span class="glyphicon glyphicon-step-forward"></span></a></li></ul><div class="col-sm-4 col-sm-offset-8"><div class="pull-right"><button ng-click="saveVisits()" ng-disabled="!canSave()" class="btn btn-primary">Submit</button>&nbsp;<button ng-click="cancel()" ng-disabled="!canCancel()" class="btn btn-default">Cancel</button></div></div></nav></div></form></div>